version: '3.3'
services:
  receiver:
    build:
      context: ./receiver/
    container_name: 'bot_receiver'
    image: 'bot_receiver'
    restart: always
    environment:
      BOT_TOKEN: 'youre_bot_token'
      RABBITMQ_URL: 'amqp://guest:guest@localhost:5672/%2F'
      REPLY_TO_QUEUE: 'bot_reply_queue'
      ADMIN_IDS: '[1, 2, 3, 4]'

  transmitter:
    build:
      context: ./transmitter/
    container_name: 'bot_transmitter'
    image: 'bot_transmitter'
    restart: always
    environment:
      BOT_TOKEN: 'youre_bot_token'
      RABBITMQ_URL: 'amqp://guest:guest@localhost:5672/%2F'
      QUEUE: 'bot_reply_queue'

  worker_ping:
    build:
      context: ./worker_ping/
    container_name: 'worker_ping'
    image: 'worker_ping'
    restart: always
    environment:
      RABBITMQ_URL: 'amqp://guest:guest@localhost:5672/%2F'
      QUEUE: 'ping_queue'

  worker_temp:
    build:
      context: ./worker_temp/
    container_name: 'worker_temp'
    image: 'worker_temp'
    restart: always
    environment:
      RABBITMQ_URL: 'amqp://guest:guest@localhost:5672/%2F'
      EXCHANGE: 'temp_exchange'
      MESSAGE: 'Температура процессора - {temp} градусов цельсия'


  worker_speedtest:
    build:
      context: ./worker_speedtest/
    container_name: 'worker_speedtest'
    image: 'worker_speedtest'
    restart: always
    environment:
      RABBITMQ_URL: 'amqp://guest:guest@localhost:5672/%2F'
      EXCHANGE: 'speedtest_exchange'
      MESSAGE_PING: 'Пинг - {ping} ms'
      MESSAGE_DOWN: 'Скорость закачки - {speed} Mbps'
      MESSAGE_UP: 'Скорость отдачи - {speed} Mbps'
